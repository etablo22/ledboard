ООО "РПК"
Описание работы прошивки модуля контроллера табло SMD5050

Различия для ведущего контроллера:
1. Измерение освещенности фотодатчиком с помощью АЦП (ADC7).
2. Отправка значения яркости по UART (RS485) на ведомые контроллеры.


Передача значения яркости ведущим контроллером:
выполняется в программном модуле TXBRIDATA при разрешении передачи;
разрешение передачи определяется в переменной TXDATAEN = 0x03 (два младших бита);
младший 0-й бит TXDATAEN: программное разрешение TX - изменяется в процессе выполнения программы для возможности приостановки процесса передачи TX;
первый бит TXDATAEN: глобальное разрешение TX - значение хранится в EEPROM; считывается в ОЗУ при сарте программы;изменяется по внешней команде (для надежности жестко указано в памяти программы, убрана возможность изменения по команде)

АДРЕСАЦИЯ
адресация табло по двум сторонам стелы независимая: 101 - 112, 201 - 212
номер и адрес табло задается кнопкой; для установки 200х адресов - удержание кнопки в течение примерно 2х секунд.
возможность изменить адрес по внешней команде с UART (RS485) при адресном обращении (нельзя применять широковещательную команду)
для надежности - адрес жестко указывается в памяти программ

Яркость
если ночной режим сделать ярче, чем дневной, то возможен эффект мигания
сделать "гистерезис" для уровней освещенности